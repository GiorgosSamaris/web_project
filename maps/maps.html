<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI=" crossorigin="anonymous" />
    <link rel="stylesheet" href="http://labs.easyblog.it/maps/leaflet-search/src/leaflet-search.css">
    <link rel="stylesheet" href="maps.css">
    <title>Maps</title>
</head>
<body>
    <div id="mapid"></div>
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js" integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/leafletsearch@3.0.2/dist/leaflet-search.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.3.0/dist/leaflet.js"></script> 
    <script src="../src/leaflet-search.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>
    <script>
        L.Icon.Default.imagePath = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.3/images/';
        let mymap = L.map('mapid');
        let tiles = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(mymap);

        mymap.setView([38.2462420, 21.7350847], 16);

        let marker = L.marker([38.2462420, 21.7350847], { draggable: true }).addTo(mymap);
        marker.bindPopup("<b>Πλατεία Γεωργίου</b>").openPopup();
        marker.on("click", markerClick);

        let data = [{ loc: [38.2466877, 21.7352181], title: "Zizu" }];
        var markersLayer = new L.LayerGroup();
        mymap.addLayer(markersLayer);

        function markerClick(event) {
            this.getPopup()
                .setLatLng(event.latlng)
                .setContent("Συντεταγμένες σημείου: " + event.latlng.toString());
        }

        let controlSearch = new L.Control.Search({
            position: "topright",
            layer: markersLayer,
            initial: false,
            zoom: 15,
            marker: false
        });
        mymap.addControl(controlSearch);

        var geojsonLayer = new L.GeoJSON.AJAX("stores.geojson"); 
        geojsonLayer.addTo(map);

        for (let item of data) {
            let { loc, title } = item;
            let marker = L.marker(L.latLng(loc), { title });
            marker.bindPopup("title: " + title);
            marker.addTo(markersLayer);
        }

    </script>
</body>
</html>
